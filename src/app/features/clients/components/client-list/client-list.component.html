<div class="container">
    <div class="header">
        <h2>Clients</h2>
        <button mat-flat-button color="primary" (click)="newClient()">Novo Client</button>
    </div>


    <table mat-table [dataSource]="clients" class="mat-elevation-z4" *ngIf="!loading; else loadingTpl">


        <ng-container matColumnDef="name">
            <th mat-header-cell *matHeaderCellDef> Nome </th>
            <td mat-cell *matCellDef="let c"> {{c.name}} </td>
        </ng-container>


        <ng-container matColumnDef="createdAt">
            <th mat-header-cell *matHeaderCellDef> Criado em </th>
            <td mat-cell *matCellDef="let c"> {{c.createdAt | date:'short'}} </td>
        </ng-container>


        <ng-container matColumnDef="actions">
            <th mat-header-cell *matHeaderCellDef> Ações </th>
            <td mat-cell *matCellDef="let c">
                <button mat-icon-button [routerLink]="['/clients', c.id]" matTooltip="Editar">
                    <mat-icon>edit</mat-icon>
                </button>
                <button mat-icon-button (click)="generateKey(c)" matTooltip="Gerar API Key">
                    <mat-icon>vpn_key</mat-icon>
                </button>
            </td>
        </ng-container>


        <tr mat-header-row *matHeaderRowDef="cols"></tr>
        <tr mat-row *matRowDef="let row; columns: cols;"></tr>
    </table>


    <ng-template #loadingTpl>
        <div class="loading-wrap"><mat-progress-spinner mode="indeterminate"></mat-progress-spinner></div>
    </ng-template>


</div>